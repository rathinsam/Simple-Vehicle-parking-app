{% extends 'base.html' %}
{%block content %}
<h2>User Dashboard</h2>
<!-- {% if active %} -->
<div class="'aleart alert-warning">
    you have atleast one active reservation: in lot(s) {{active}}.
    <a href="/vacate_shortcut" class="btn btn-sm btn-danger ms-2">Vacate Now</a>
</div>
<!-- {% endif %} -->
<table class="table table-striped">
    <thead>
        <tr>
            <th>Lot</th>
            <th>Address</th>
            <th>Available Spots</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% for lot in lots %}
        <tr>
            <td>{{ lot.name }}</td>
            <td>{{ lot.address }}</td>
            <td>
                {{ lot.spots | selectattr("status", "equalto", "Available") | list | length }}
            </td>
            <td>
                {% if lot.spots | selectattr("status", "equalto", "Available") | list | length > 0 %}
                <!-- <a href="/reserve/{{ lot.id }}" class="btn btn-primary btn-sm">Reserve</a> -->
                <a href="/reserve_form/{{ lot.id }}" class="btn btn-primary btn-sm">Reserve</a>
                {% else %}
                <button class="btn btn-secondary btn-sm" disabled>No Spots</button>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}